# LIVE profile (small bankroll / $200)
#
# Run with: `-Dspring.profiles.active=live`
# Safety:
# - This profile enables LIVE mode + LIVE_ACK header by default.
# - Use env var `HFT_KILL_SWITCH=true` to hard-disable trading immediately.
# - Use env var `HFT_SEND_LIVE_ACK=false` to prevent order placement.

hft:
  mode: LIVE

  events:
    enabled: true
    market-ws-cache-publish-on-start: true
    market-ws-snapshot-publish-millis: 1000

  executor:
    base-url: http://localhost:8080
    # SAFETY: keep this false until you're ready to place LIVE orders.
    # When false, executor-service will refuse order placement with HTTP 428 (LiveTradingGuardFilter).
    send-live-ack: false

  polymarket:
    market-ws-enabled: true
    market-ws-cache-path: .cache/ws/market-ws-cache.strategy.live.json
    market-ws-cache-flush-millis: 5000
    # Faster WS self-heal (defaults are larger; lower helps maintain decision-time coverage).
    market-ws-stale-timeout-millis: 15000
    market-ws-reconnect-backoff-millis: 2000

  # Executor-side enforcement also applies, but we mirror caps here so sizing is bounded before submit.
  risk:
    kill-switch: false
    max-order-notional-usd: 10
    max-order-size: 0

  strategy:
    gabagool:
      # SAFETY: keep disabled until you're ready to go LIVE.
      enabled: false

      # Loop / execution cadence (conservative for LIVE)
      refresh-millis: 500
      min-replace-millis: 5000

      # Window
      min-seconds-to-end: 0
      max-seconds-to-end: 3600

      # Sizing (replica uses discrete share sizes; bankroll caps below clamp them for $200)
      quote-size: 10
      quote-size-bankroll-fraction: 0.0
      bankroll-usd: 200
      max-order-bankroll-fraction: 0.05     # $10/order
      max-total-bankroll-fraction: 0.50     # $100 total exposure

      # Complete-set edge + hedging behavior
      improve-ticks: 0
      complete-set-min-edge: 0.01
      complete-set-max-skew-ticks: 1
      complete-set-imbalance-shares-for-max-skew: 200

      complete-set-top-up-enabled: true
      complete-set-top-up-seconds-to-end: 60
      complete-set-top-up-min-shares: 10

      complete-set-fast-top-up-enabled: true
      complete-set-fast-top-up-min-shares: 10
      complete-set-fast-top-up-min-seconds-after-fill: 3
      complete-set-fast-top-up-max-seconds-after-fill: 120
      complete-set-fast-top-up-cooldown-millis: 15000
      complete-set-fast-top-up-min-edge: 0.01

      # Disable explicit taker-entry; taker behavior comes from hedging top-ups.
      taker-mode-enabled: false
      taker-mode-max-edge: 0.015
      taker-mode-max-spread: 0.02

# Keep logs usable in LIVE.
logging:
  level:
    com.polybot.hft.polymarket.strategy: INFO
